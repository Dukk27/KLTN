@model KLTN.Models.RegisterViewModel
@{
    ViewData["Title"] = "Đăng ký";
}
<head>
    <link rel="stylesheet" href="~/css/Account/login.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/iziToast.css" />
    <script src="~/js/eye.js"></script>
</head>

<body>
    <div class="login-wrapper">
        <div class="login-illustration">
            <img src="~/img/login.jpg" alt="Register Illustration" />
        </div>

        <div class="login-form-container">
            <h1 class="login-title">CHÀO MỪNG BẠN ĐẾN VỚI TIMTRODE</h1>

            <form id="registerForm" method="post" asp-action="Register" class="login-form">
                <div class="form-group">
                    <label for="userName">Tên đăng nhập</label>
                    <input asp-for="UserName" class="form-control" id="userName" placeholder="Nhập tên đăng nhập" />
                    <span asp-validation-for="UserName" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="password">Mật khẩu</label>
                    <div class="input-group">
                        <input asp-for="Password" type="password" class="form-control" id="password" placeholder="Nhập mật khẩu" />
                        <button type="button" class="btn-outline-secondary toggle-password" data-target="password">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Password" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Xác nhận mật khẩu</label>
                    <div class="input-group">
                        <input asp-for="ConfirmPassword" type="password" class="form-control" id="confirmPassword" placeholder="Xác nhận mật khẩu" />
                        <button type="button" class="btn-outline-secondary toggle-password" data-target="confirmPassword">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </div>
                    <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label for="phoneNumber">Số điện thoại</label>
                    <input asp-for="PhoneNumber" class="form-control" id="phoneNumber" placeholder="Nhập số điện thoại" />
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div> 

                <div class="form-group">
                    <label for="email">Email</label>
                    <input asp-for="Email" class="form-control" id="email" placeholder="Nhập email" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label>Vai trò</label><br />
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" id="role1" name="Role" value="1" required />
                        <label class="form-check-label" for="role1">Người cho thuê</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" id="role2" name="Role" value="2" required />
                        <label class="form-check-label" for="role2">Người tìm thuê</label>
                    </div>
                </div>

                <div class="form-group text-center">
                    <button type="submit" class="btn btn-primary">Đăng ký</button>
                </div>

                <p class="text-center mt-3" style="font-style: italic;">
                    Bạn đã có tài khoản? <a asp-action="Login">Đăng nhập</a>
                </p>
            </form>
        </div>
    </div>
</body>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css" />

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var errorMessages = @Html.Raw(Json.Serialize(ViewBag.Errors ?? new List<string>()));
            if (errorMessages && errorMessages.length > 0) {
                errorMessages.forEach(error => {
                    iziToast.error({
                        title: 'Đăng ký thất bại',
                        message: error,
                        position: 'topRight',
                        timeout: 2000
                    });
                });
            }

            var successMessage = '@Html.Raw(ViewBag.Success)';
            if (successMessage) {
                iziToast.success({
                    title: 'Thành công!',
                    message: successMessage,
                    position: 'topRight',
                    timeout: 1500,
                    onClosing: function () {
                        window.location.href = '@Url.Action("Login", "Account")';
                    }
                });
            }
        });
    </script>
}
